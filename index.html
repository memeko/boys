<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ö–∞—Ä—Ç–æ—á–∫–∏-–∫–≤–∏–∑ ‚Äî ¬´–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –º–∞–ª—å—á–∏–∫–æ–≤¬ª</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg:#0b1020; --bg2:#0f1733; --card:#121b38cc; --card2:#101a36f2;
      --text:#eef2ff; --muted:#b7c2ff;
      --accent:#ffd37a; --accent2:#7ad7ff;
      --good:#59d38c; --bad:#ff6b7a;
      --shadow:0 18px 55px rgba(0,0,0,.45);
      --radius:22px;
      --ring:0 0 0 3px rgba(122,215,255,.25);
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
      --sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Arial,"Apple Color Emoji","Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f5f7ff; --bg2:#eef2ff; --card:#ffffffcc; --card2:#ffffff;
        --text:#0c1633; --muted:#4b5a86;
        --shadow:0 18px 55px rgba(6,20,60,.15);
        --ring:0 0 0 3px rgba(40,110,255,.18);
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100svh; padding:24px 14px;
      font-family:var(--sans); color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(122,215,255,.22), transparent 55%),
        radial-gradient(900px 700px at 90% 20%, rgba(255,211,122,.20), transparent 60%),
        radial-gradient(900px 700px at 50% 100%, rgba(179,122,255,.16), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      display:flex; justify-content:center; align-items:stretch;
    }
    .app{width:min(980px,100%); display:flex; flex-direction:column; gap:14px;}
    header{
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      padding:14px 16px; border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(255,211,122,.14), rgba(122,215,255,.12));
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
    }
    .brand{display:flex; flex-direction:column; gap:2px; min-width:0; flex:1;}
    .kicker{
      font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted);
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
    }
    .badge{
      font-family:var(--mono); font-size:12px; padding:2px 8px; border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.08);
      color:var(--text); white-space:nowrap;
    }
    .title{margin:0; font-size:18px; font-weight:760; line-height:1.2;}
    .sub{margin:0; font-size:13px; color:var(--muted); line-height:1.25;}
    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.10); color:var(--text);
      padding:10px 12px; border-radius:14px; font-weight:650;
      cursor:pointer; user-select:none;
      transition:transform .06s ease, background .15s ease, border-color .15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{background:rgba(255,255,255,.14)}
    .btn:active{transform:translateY(1px)}
    .btn:focus-visible{outline:none; box-shadow:var(--ring)}
    .btn.primary{
      background:linear-gradient(135deg, rgba(255,211,122,.28), rgba(122,215,255,.18));
      border-color:rgba(255,211,122,.28);
    }

    main{display:grid; grid-template-columns:1.25fr .75fr; gap:14px; align-items:stretch;}
    @media (max-width:860px){ main{grid-template-columns:1fr;} }

    .card{
      border-radius:var(--radius);
      background:linear-gradient(180deg, var(--card), var(--card2));
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.12);
      padding:18px;
      backdrop-filter: blur(10px);
    }
    .metaRow{display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin-bottom:12px;}
    .progress{display:flex; flex-direction:column; gap:6px; min-width:220px;}
    .line{height:10px; border-radius:999px; background:rgba(255,255,255,.10); overflow:hidden; border:1px solid rgba(255,255,255,.10);}
    .bar{height:100%; width:0%; border-radius:999px; background:linear-gradient(90deg, rgba(122,215,255,.9), rgba(255,211,122,.9)); transition:width .35s ease;}
    .ptxt{font-family:var(--mono); font-size:12px; color:var(--muted); display:flex; justify-content:space-between; gap:10px;}
    .scoreBox{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-end; font-family:var(--mono); color:var(--muted); font-size:12px;}
    .pill{padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.08); color:var(--text);}
    .question{font-size:18px; line-height:1.35; margin:0 0 12px 0; font-weight:720;}

    .options{display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px;}
    .opt{
      text-align:left; width:100%;
      padding:12px 12px; border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      transition:transform .06s ease, background .15s ease, border-color .15s ease;
      display:flex; gap:10px; align-items:flex-start;
    }
    .opt:hover{background:rgba(255,255,255,.10)}
    .opt:active{transform:translateY(1px)}
    .opt:focus-visible{outline:none; box-shadow:var(--ring)}
    .opt[disabled]{opacity:.65; cursor:not-allowed}
    .idx{font-family:var(--mono); font-weight:800; opacity:.75; min-width:22px; margin-top:1px;}
    .opt.good{border-color:rgba(89,211,140,.55); background:rgba(89,211,140,.16)}
    .opt.bad{border-color:rgba(255,107,122,.55); background:rgba(255,107,122,.14)}

    .feedback{
      margin-top:12px; display:flex; gap:10px; align-items:flex-start;
      padding:12px 12px; border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
    }
    .dot{width:10px; height:10px; border-radius:50%; margin-top:4px; flex:0 0 auto; background:var(--accent2);}
    .feedback.good .dot{background:var(--good)}
    .feedback.bad .dot{background:var(--bad)}
    .feedback p{margin:0; color:var(--muted); line-height:1.35; font-size:13px;}

    .side .h{margin:0 0 10px 0; font-size:14px; letter-spacing:.02em; text-transform:uppercase; color:var(--muted);}
    .side a{color:var(--text); text-decoration:none; border-bottom:1px dashed rgba(255,255,255,.35);}
    .side a:hover{border-bottom-color:transparent;}
    .small{font-size:13px; color:var(--muted); line-height:1.45; margin:0;}
    .kbd{
      font-family:var(--mono); font-size:12px; padding:2px 6px;
      border-radius:8px; border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.08); color:var(--text);
    }
    footer{margin-top:4px; text-align:center; color:var(--muted); font-size:12px; line-height:1.35;}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="–ò–≥—Ä–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏-–≤–æ–ø—Ä–æ—Å–∞–º–∏">
    <header>
      <div class="brand">
        <div class="kicker">
          <span class="badge">–∫–∞—Ä—Ç–æ—á–∫–∏-–∫–≤–∏–∑</span>
          <span class="badge">–ø–æ –∫–Ω–∏–≥–µ</span>
          <span class="badge">–≤—Å—ë –≤–Ω—É—Ç—Ä–∏ index.html</span>
        </div>
        <h1 class="title">¬´–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –º–∞–ª—å—á–∏–∫–æ–≤. –¢–æ–Ω–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è —Å—ã–Ω–æ–≤–µ–π¬ª</h1>
        <p class="sub">–ö–∞—Ä—Ç–æ—á–∫–∏ –∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –≤–∑—è—Ç—ã –∏–∑ –≤–∞—à–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö; —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–Ω–∏–≥—É ‚Äî —Å–ø—Ä–∞–≤–∞.</p>
      </div>
      <div class="actions">
        <button class="btn" id="btnShuffle" title="–ü–µ—Ä–µ–º–µ—à–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤">üîÄ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
        <button class="btn primary" id="btnRestart" title="–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ">‚Üª –ó–∞–Ω–æ–≤–æ</button>
      </div>
    </header>

    <main>
      <section class="card" aria-live="polite">
        <div class="metaRow">
          <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å">
            <div class="line" aria-hidden="true"><div class="bar" id="bar"></div></div>
            <div class="ptxt">
              <span id="posTxt">‚Äî</span>
              <span id="deckTxt">‚Äî</span>
            </div>
          </div>
          <div class="scoreBox" aria-label="–°—á—ë—Ç">
            <span class="pill" id="scorePill">–û—á–∫–∏: 0</span>
            <span class="pill" id="streakPill">–°–µ—Ä–∏—è: 0</span>
          </div>
        </div>

        <p class="question" id="q">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</p>
        <div class="options" id="opts" role="list"></div>

        <div id="fb" class="feedback" style="display:none;">
          <div class="dot" aria-hidden="true"></div>
          <p id="fbText"></p>
        </div>

        <div class="metaRow" style="margin-top:14px;">
          <span class="small">
            –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞: <span class="kbd">1</span>‚Äì<span class="kbd">4</span> –≤—ã–±—Ä–∞—Ç—å,
            <span class="kbd">Enter</span> –¥–∞–ª—å—à–µ.
          </span>
          <button class="btn" id="btnNext" disabled title="–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å">‚Üí –î–∞–ª—å—à–µ</button>
        </div>
      </section>

      <aside class="card side">
        <p class="h">–ò—Å—Ç–æ—á–Ω–∏–∫</p>
        <p class="small" style="margin-bottom:10px;">
          –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ä–∞–º–∫–∞ ‚Äî –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –æ—Ç—Å—ã–ª–∫–∞ –∫ –∫–Ω–∏–≥–µ, –±–µ–∑ –ø–æ–ø—ã—Ç–æ–∫ ‚Äú–∫–æ—Å–ø–ª–µ–∏—Ç—å‚Äù –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
        </p>
        <p class="small" style="margin:0 0 10px 0;">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–Ω–∏–≥–∏ –Ω–∞ —Å–∞–π—Ç–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞:
          <br />
          <a href="https://pilotlz.ru/books/309/11037/" target="_blank" rel="noopener noreferrer">
            pilotlz.ru/books/309/11037/
          </a>
        </p>

        <p class="h" style="margin-top:14px;">–ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ</p>
        <p class="small">
          –í–Ω–∏–∑—É —Ñ–∞–π–ª–∞ –Ω–∞–π–¥–∏—Ç–µ <span class="kbd">const DATA = [...]</span> –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –º–∞—Å—Å–∏–≤.
          –í—Å—ë. –ù–∏–∫–∞–∫–∏—Ö CSV, CORS –∏ ‚Äú–ø–æ—á–µ–º—É –Ω–∞ –ø—Ä–æ–¥–µ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è‚Äù.
        </p>
      </aside>
    </main>

    <footer>
      –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û—Ç—Å—ã–ª–∫–∞ –∫ –∫–Ω–∏–≥–µ ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è: ¬´–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –º–∞–ª—å—á–∏–∫–æ–≤. –¢–æ–Ω–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è —Å—ã–Ω–æ–≤–µ–π¬ª.
    </footer>
  </div>

  <script>
    // =========================
    // –î–ê–ù–ù–´–ï (–≤—à–∏—Ç—ã–π JSON)
    // =========================
    // –§–æ—Ä–º–∞—Ç: [{ q: "–í–æ–ø—Ä–æ—Å", a: "–í–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç" }, ...]
    const DATA = [
      {"q":"–°–æ–≥–ª–∞—Å–Ω–æ –∫–Ω–∏–≥–µ, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–æ–π –æ–ø–∞—Å–Ω–æ–π –ª–æ–≤—É—à–∫–æ–π –≤ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–∏ –º–∞–ª—å—á–∏–∫–æ–≤?","a":"–ù–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å —Å—ã–Ω–æ–º –æ–± —ç–≤–æ–ª—é—Ü–∏–∏ –µ–≥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ ¬´–Ø¬ª."},
      {"q":"–ï—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –Ω–µ –±—É–¥—É—Ç –≤–µ—Å—Ç–∏ —Å —Å—ã–Ω–æ–º –≤–∞–∂–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –æ–± —ç–≤–æ–ª—é—Ü–∏–∏ –µ–≥–æ ¬´–Ø¬ª, –æ—Ç–∫—É–¥–∞ —Å—ã–Ω –ø–æ–ª—É—á–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?","a":"–î—Ä—É–≥, —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —Å –∏–Ω–æ–π –∏–¥–µ–æ–ª–æ–≥–∏–µ–π –∏–ª–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç."},
      {"q":"–ö–∞–∫–æ–π –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –ø–µ—Ä–∏–æ–¥ —Ä–∞–∑–≤–∏—Ç–∏—è –º–∞–ª—å—á–∏–∫–æ–≤ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–∏–≥–∞?","a":"–û—Ç –≤–æ—Å—å–º–∏-–¥–µ–≤—è—Ç–∏ –ª–µ—Ç –¥–æ –¥–≤–∞–¥—Ü–∞—Ç–∏ —Å –Ω–µ–±–æ–ª—å—à–∏–º."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è–º –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –æ—à–∏–±–∫–∞–º –≤ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–∏?","a":"–ü—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –∏—Ö, –∏–∑–≤–∏–Ω—è—Ç—å—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —É—á–∏—Ç—å—Å—è."},
      {"q":"–ö–∞–∫–æ–≤ –ø–µ—Ä–≤—ã–π –∏ –≥–ª–∞–≤–Ω—ã–π —Å–æ–≤–µ—Ç –ø–æ –æ–±—â–µ–Ω–∏—é —Å –º–∞–ª—å—á–∏–∫–∞–º–∏?","a":"–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å, –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–º—É—â–µ–Ω–∏–µ –∏ —Å—Ç—Ä–∞—Ö."},
      {"q":"–ß—Ç–æ —Å–ª–µ–¥—É–µ—Ç –¥–µ–ª–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è–º, –∫–æ–≥–¥–∞ –∏—Ö —Å—ã–Ω –≥–æ—Ç–æ–≤ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π?","a":"–°–ª—É—à–∞—Ç—å –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–æ–º—ã—Å–ª–æ–≤."},
      {"q":"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–∑–∞–º–µ–Ω ¬´–º–æ–ª—á–∞–ª–∏–≤–æ–≥–æ¬ª –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è?","a":"–ê–∫—Ç–∏–≤–Ω–æ–µ –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è —Å—ã–Ω–∞."},
      {"q":"–ß—Ç–æ, –ø–æ –º–Ω–µ–Ω–∏—é –∞–≤—Ç–æ—Ä–∞, –ø–æ–º–æ–≥–∞–µ—Ç –º–∞–ª—å—á–∏–∫–∞–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?","a":"–†–∞–∑–≥–æ–≤–æ—Ä—ã –æ —á—É–≤—Å—Ç–≤–∞—Ö –∏ –∏—Ö –ø—Ä–∏–Ω—è—Ç–∏–µ –∫–∞–∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ –∂–∏–∑–Ω–∏."},
      {"q":"–ö–∞–∫–æ–π —Ñ–∞–∫—Ç–æ—Ä –æ—Å–æ–±–µ–Ω–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –º–∞–ª—å—á–∏–∫–æ–≤ –≤ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ?","a":"–û—â—É—â–µ–Ω–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–Ω—è—Ç–∏—è –≤ –≥—Ä—É–ø–ø–µ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤."},
      {"q":"–ß—Ç–æ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è–º, –æ–±—Å—É–∂–¥–∞—è —Å –º–∞–ª—å—á–∏–∫–∞–º–∏ —Ç–µ–º—ã —Ç–µ–ª–∞ –∏ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è?","a":"–î–∞–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é, —Å–ø–æ–∫–æ–π–Ω—É—é –∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –±–µ–∑ —Å—Ç—ã–¥–∞."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä —Å–æ–≤–µ—Ç—É–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ ¬´–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç—å¬ª —Å—ã–Ω–∞?","a":"–°–æ–∑–¥–∞–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –¥–∏–∞–ª–æ–≥–∞ –∏ –Ω–µ –¥–∞–≤–∏—Ç—å."},
      {"q":"–ö–∞–∫–∞—è –æ—à–∏–±–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –º–æ–∂–µ—Ç —É—Å–∏–ª–∏—Ç—å –æ—Ç—á—É–∂–¥–µ–Ω–∏–µ –ø–æ–¥—Ä–æ—Å—Ç–∫–∞?","a":"–û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–π –∏ –º–æ—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä—Å—Ç–≤–æ –≤–º–µ—Å—Ç–æ –¥–∏–∞–ª–æ–≥–∞."},
      {"q":"–ö–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞–µ—Ç –æ—Ç–µ—Ü (–∏–ª–∏ –∑–Ω–∞—á–∏–º—ã–π –≤–∑—Ä–æ—Å–ª—ã–π –º—É–∂—á–∏–Ω–∞) –≤ –∂–∏–∑–Ω–∏ –º–∞–ª—å—á–∏–∫–∞?","a":"–ú–æ–¥–µ–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –∑–¥–æ—Ä–æ–≤—ã—Ö –≥—Ä–∞–Ω–∏—Ü."},
      {"q":"–ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –º–∞–ª—å—á–∏–∫–∞–º —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Å–∏–ª—å–Ω—ã–º–∏ —ç–º–æ—Ü–∏—è–º–∏?","a":"–ù–∞–≤—ã–∫–∏ –Ω–∞–∑—ã–≤–∞–Ω–∏—è —ç–º–æ—Ü–∏–π, –¥—ã—Ö–∞–Ω–∏–µ, –ø–∞—É–∑—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∑—Ä–æ—Å–ª–æ–≥–æ."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –æ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∏ —Å–æ–≥–ª–∞—Å–∏–∏?","a":"–ü—Ä—è–º–æ, —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö."},
      {"q":"–ß—Ç–æ –≤–∞–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º–∞–ª—å—á–∏–∫ —Å–æ–≤–µ—Ä—à–∏–ª –æ—à–∏–±–∫—É?","a":"–û—Ç–¥–µ–ª—è—Ç—å –ø–æ—Å—Ç—É–ø–æ–∫ –æ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏ –∏ –æ–±—Å—É–∂–¥–∞—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ –≤—ã–±–æ—Ä."},
      {"q":"–ü–æ—á–µ–º—É –º–∞–ª—å—á–∏–∫–∏ –∏–Ω–æ–≥–¥–∞ –∏–∑–±–µ–≥–∞—é—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –æ —á—É–≤—Å—Ç–≤–∞—Ö?","a":"–ò–∑-–∑–∞ —Å—Ç—Ä–∞—Ö–∞ –æ—Å—É–∂–¥–µ–Ω–∏—è –∏ –ø—Ä–∏–≤—ã—á–∫–∏ ¬´–¥–µ—Ä–∂–∞—Ç—å—Å—è¬ª."},
      {"q":"–ö–∞–∫–æ–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–º –∞–≤—Ç–æ—Ä —Å—á–∏—Ç–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º?","a":"–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π: —É–≤–∞–∂–µ–Ω–∏–µ + —è—Å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Å—É–∂–¥–∞—Ç—å."},
      {"q":"–ß—Ç–æ –∑–Ω–∞—á–∏—Ç ¬´–±—ã—Ç—å —Ä—è–¥–æ–º¬ª –¥–ª—è –ø–æ–¥—Ä–æ—Å—Ç–∫–∞ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?","a":"–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –≤–Ω–∏–º–∞–Ω–∏–µ, —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –¥–µ–ª–∞ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–ª—É—à–∞—Ç—å."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è–º –≥–æ–≤–æ—Ä–∏—Ç—å –æ –¥—Ä—É–∂–±–µ –∏ –≤–ª–∏—è–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏?","a":"–ë–µ–∑ –ø–∞–Ω–∏–∫–∏: –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏ –≤—ã–±–æ—Ä–∞."},
      {"q":"–ß—Ç–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –ø–æ–∫–æ–ª–µ–Ω–∏–π –≤ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ?","a":"–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø –æ—Ç–¥–µ–ª–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏."},
      {"q":"–ö–∞–∫ –∫–Ω–∏–≥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é –º–∞–ª—å—á–∏–∫–∞ –∫ —É—á–µ–±–µ?","a":"–°–≤—è–∑—ã–≤–∞—Ç—å —É—á–µ–±—É —Å —Ü–µ–ª—è–º–∏, –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏."},
      {"q":"–ö–∞–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Å–æ—Ä –¥–æ–º–∞?","a":"–ü—Ä–∞–≤–∏–ª–∞, –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è –∏ —Å–ø–æ–∫–æ–π–Ω–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π."},
      {"q":"–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –º–∞–ª—å—á–∏–∫—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏ —á–µ—Å—Ç–Ω–µ–µ?","a":"–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–∫–∞–∑–∞–Ω–∏—è –∑–∞ –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ —É–≤–∞–∂–µ–Ω–∏–µ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –æ–±—Å—É–∂–¥–∞—Ç—å —Ü–∏—Ñ—Ä–æ–≤—É—é —Å—Ä–µ–¥—É –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç?","a":"–ù–µ –∑–∞–ø—Ä–µ—â–∞—Ç—å –≤—Å–ª–µ–ø—É—é, –∞ –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å—Å—è –æ –ø—Ä–∞–≤–∏–ª–∞—Ö –∏ —Ä–∏—Å–∫–∞—Ö."},
      {"q":"–ß—Ç–æ –≤–∞–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—é, –∫–æ–≥–¥–∞ —Å—ã–Ω ¬´–ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è¬ª –≤ —Å–µ–±—è?","a":"–û—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ä—è–¥–æ–º, –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–∫–∞—Ç—å –ø–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤."},
      {"q":"–ü–æ—á–µ–º—É –≤–∞–∂–Ω—ã —Å–µ–º–µ–π–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏ —Ä–∏—Ç—É–∞–ª—ã?","a":"–û–Ω–∏ –¥–∞—é—Ç –æ—â—É—â–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏."},
      {"q":"–ö–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç –ø–æ—Ö–≤–∞–ª–∞ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ?","a":"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –º–æ—Ç–∏–≤–∞—Ü–∏—é, –µ—Å–ª–∏ –æ–Ω–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –∏ —á–µ—Å—Ç–Ω—ã."},
      {"q":"–ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –º–∞–ª—å—á–∏–∫–∞–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å?","a":"–†–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."},
      {"q":"–ö–∞–∫ –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º —Å—Ç—Ä–∞—Ö–æ–º?","a":"–†–∞–∑–¥–µ–ª—è—Ç—å —Ç—Ä–µ–≤–æ–≥—É –∏ —Ñ–∞–∫—Ç—ã, –≥–æ–≤–æ—Ä–∏—Ç—å –∏ —É—á–∏—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Å—ã–Ω–æ–º."},
      {"q":"–ö–∞–∫–æ–π –≥–ª–∞–≤–Ω—ã–π —Å–º—ã—Å–ª –∫–Ω–∏–≥–∏ –≤ –æ–¥–Ω–æ–º —Ç–µ–∑–∏—Å–µ?","a":"–° —Å—ã–Ω–æ–º –Ω—É–∂–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ, —á–µ—Å—Ç–Ω–æ –∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ, –ø–æ–∫–∞ –æ–Ω —Ä–∞—Å—Ç–µ—Ç."}
    ];

    // =========================
    // –õ–û–ì–ò–ö–ê –ò–ì–†–´
    // =========================
    const CHOICES = 4;

    let deck = [];
    let order = [];
    let idx = 0;
    let locked = false;
    let answered = false;
    let score = 0;
    let streak = 0;

    const elQ = document.getElementById("q");
    const elOpts = document.getElementById("opts");
    const elFb = document.getElementById("fb");
    const elFbText = document.getElementById("fbText");
    const elNext = document.getElementById("btnNext");
    const elShuffle = document.getElementById("btnShuffle");
    const elRestart = document.getElementById("btnRestart");
    const elBar = document.getElementById("bar");
    const elPos = document.getElementById("posTxt");
    const elDeckTxt = document.getElementById("deckTxt");
    const elScore = document.getElementById("scorePill");
    const elStreak = document.getElementById("streakPill");

    function shuffle(arr){
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
    function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

    function setFeedback(kind, msg){
      elFb.style.display = "flex";
      elFb.classList.remove("good","bad");
      if (kind) elFb.classList.add(kind);
      elFbText.textContent = msg;
    }
    function clearFeedback(){
      elFb.style.display = "none";
      elFb.classList.remove("good","bad");
      elFbText.textContent = "";
    }

    function buildOrder(){
      order = shuffle([...Array(deck.length).keys()]);
      idx = 0;
      answered = false;
      locked = false;
      clearFeedback();
      elNext.disabled = true;
      render();
    }

    function pickChoices(correctAnswer){
      const allAnswers = deck.map(x => x.a).filter(Boolean);
      const pool = allAnswers.filter(a => a !== correctAnswer);
      const picks = shuffle(pool).slice(0, Math.max(0, CHOICES - 1));
      const choices = shuffle([correctAnswer, ...picks]).slice(0, CHOICES);
      while (choices.length < CHOICES) choices.push(correctAnswer);
      return choices;
    }

    function updateHUD(){
      const total = order.length || 1;
      const pos = clamp(idx + 1, 1, total);
      elPos.textContent = `–í–æ–ø—Ä–æ—Å ${pos} –∏–∑ ${total}`;
      elDeckTxt.textContent = `${deck.length} –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –Ω–∞–±–æ—Ä–µ`;
      elScore.textContent = `–û—á–∫–∏: ${score}`;
      elStreak.textContent = `–°–µ—Ä–∏—è: ${streak}`;
      elBar.style.width = `${Math.round((pos / total) * 100)}%`;
    }

    function render(){
      updateHUD();

      if (!deck.length){
        elQ.textContent = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–≥—Ä—ã.";
        elOpts.innerHTML = "";
        return;
      }

      const card = deck[order[idx]];
      elQ.textContent = card.q;

      elOpts.innerHTML = "";
      clearFeedback();
      elNext.disabled = true;
      answered = false;
      locked = false;

      const choices = pickChoices(card.a);
      choices.forEach((text, i) => {
        const btn = document.createElement("button");
        btn.className = "opt";
        btn.type = "button";
        btn.setAttribute("role", "listitem");
        btn.dataset.index = String(i);
        btn.dataset.value = text;

        const idxSpan = document.createElement("span");
        idxSpan.className = "idx";
        idxSpan.textContent = `${i+1}.`;

        const tSpan = document.createElement("span");
        tSpan.textContent = text;

        btn.appendChild(idxSpan);
        btn.appendChild(tSpan);
        btn.addEventListener("click", () => choose(btn));
        elOpts.appendChild(btn);
      });
    }

    function choose(btn){
      if (locked || answered) return;
      locked = true;

      const selected = btn.dataset.value;
      const card = deck[order[idx]];
      const correct = card.a;

      const optionButtons = [...elOpts.querySelectorAll(".opt")];
      optionButtons.forEach(b => b.disabled = true);

      optionButtons.forEach(b => {
        if (b.dataset.value === correct) b.classList.add("good");
      });
      if (selected !== correct) btn.classList.add("bad");

      answered = true;
      elNext.disabled = false;

      if (selected === correct){
        score += 1;
        streak += 1;
        setFeedback("good", "–í–µ—Ä–Ω–æ. –ù–µ –º–∞–≥–∏—è ‚Äî –ø—Ä–æ—Å—Ç–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏ –º–æ–∑–≥ –±–µ–∑ –ø–∞–Ω–∏–∫–∏.");
      } else {
        streak = 0;
        setFeedback("bad", `–ù–µ–≤–µ—Ä–Ω–æ. –í–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç: ¬´${correct}¬ª.`);
      }

      updateHUD();
      locked = false;
    }

    function next(){
      if (!answered) return;
      if (idx < order.length - 1){
        idx += 1;
        render();
      } else {
        elQ.textContent = "–§–∏–Ω–∏—à! üéØ";
        elOpts.innerHTML = "";
        elNext.disabled = true;

        const total = order.length;
        const pct = Math.round((score / total) * 100);
        setFeedback(null, `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score}/${total} (${pct}%). –ù–∞–∂–º–∏—Ç–µ ¬´–ó–∞–Ω–æ–≤–æ¬ª, —á—Ç–æ–±—ã —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑.`);
      }
      updateHUD();
    }

    elNext.addEventListener("click", next);
    elRestart.addEventListener("click", () => { score = 0; streak = 0; buildOrder(); });
    elShuffle.addEventListener("click", () => buildOrder());

    window.addEventListener("keydown", (ev) => {
      const k = ev.key;
      if (k >= "1" && k <= "4"){
        const i = Number(k) - 1;
        const btn = elOpts.querySelector(`.opt[data-index="${i}"]`);
        if (btn && !btn.disabled) btn.click();
      }
      if (k === "Enter"){
        if (!elNext.disabled) next();
      }
    });

    // —Å—Ç–∞—Ä—Ç
    deck = Array.isArray(DATA) ? DATA.filter(x => x && x.q && x.a) : [];
    buildOrder();
  </script>
</body>
</html>
